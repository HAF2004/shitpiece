-- IMPORTANT!!
--[[

CARA PAKAI:
- PRIVATE SERVER.
- HAKI SEMUA OFF SEBELUM RUN SCRIPT.
- PEGANG MELEE/SWORD/FRUIT SEBELUM RUN SCRIPT.

PERTANYAAN:
1. GIMANA KALO KE FLING?
2. GIMANA KALO MATI?

JAWABAN:
1. DASH.
2. SALAH SENDIRI (canda :v), SANTAI AJA SCRIPT NYA UDAH HANDLE, TINGGAL TUNGGU 5 MENIT.

]]

if game.PlaceId ~= 15049111150 then return end
repeat task.wait() until game:IsLoaded() or game.Players.LocalPlayer.Character
for _, a in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do if
string.find(a.Name, "Inverted") then a.Parent = game.Players.LocalPlayer.Character

end end

function FirePPInBox(char :Model, size :Vector3)
	for _, part :BasePart in pairs(workspace:GetPartBoundsInBox(char:FindFirstChild("HumanoidRootPart").CFrame, size)) do
		local PP = part:FindFirstChildWhichIsA("ProximityPrompt")
		if PP then
			if fireproximityprompt then
				fireproximityprompt(PP)
			else
				print("No fireproximityprompt Function in Your Executor")
			end
		end
	end
end

function takeQuest()
	if game.Players.LocalPlayer.Character 
		and game.Players.LocalPlayer.Character:WaitForChild("Humanoid") 
		and game.Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid").Health > 0

	then
		local Char = game.Players.LocalPlayer.Character
		Char.HumanoidRootPart.CFrame = workspace:FindFirstChild("NPC").Kuru:FindFirstChild("HumanoidRootPart").CFrame * CFrame.new(0, 0, -6.5) * CFrame.Angles(math.rad(0), math.rad(180), math.rad(0))
		task.wait(0.1)
		for i = 1, 3 do
			FirePPInBox(game.Players.LocalPlayer.Character, Vector3.one * 15)
			task.wait(0.1)
		end
	end
end

function PressKey(code)
	task.spawn(function()
		keypress(code)
		task.wait(0.1)
		keyrelease(code)
	end)
end

function turnHaki()
	PressKey(0x54)
	PressKey(0x47)
end

function stopvel(char :Model)
	print("stopvel called")
	while char do
		local V3 = Vector3.new(0,0,0)
		for _, v in ipairs(char:GetDescendants()) do
			if v:IsA("BasePart") then
				v.Velocity, v.RotVelocity, v.AssemblyLinearVelocity, v.AssemblyAngularVelocity = V3, V3, V3, V3
			end
		end
		task.wait()
	end
	print("stopvel ended")
end

function start()
	while game.Players.LocalPlayer.Character do
		local Player = game.Players.LocalPlayer
		local Character = Player.Character

		takeQuest()
		task.wait(0.1)
		local headSit = nil
		local RunService = game:GetService("RunService")

		for _, v in pairs(workspace:FindFirstChild("Lives"):GetChildren()) do

			if v:IsA("Model") then
				local v :Model = v
				local targetHum = v:FindFirstChildWhichIsA("Humanoid")

				if targetHum and targetHum.Health > 0 then

					if string.find(v.Name, "8500") or string.find(targetHum.DisplayName, "8500") then

						game.Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid').Sit = true
						headSit = RunService.Heartbeat:Connect(function()
							if v ~= nil and v:FindFirstChild("HumanoidRootPart") and Character:FindFirstChild("HumanoidRootPart") and Character:FindFirstChildOfClass('Humanoid').Sit == true then
								Character:FindFirstChild("HumanoidRootPart").CFrame = v:FindFirstChild("HumanoidRootPart").CFrame * CFrame.Angles(0,math.rad(0),0)* CFrame.new(0,1.6,0.4)
							else
								headSit:Disconnect()
								task.spawn(function()
									repeat
										Character:FindFirstChild("Humanoid").Sit = false
									until Character:FindFirstChild("Humanoid").Sit == false
								end)
							end
						end)

						while targetHum.Health > 0 and Character:FindFirstChild("Humanoid").Health > 0 do
							PressKey(0x5A)
							PressKey(0x58)
							PressKey(0x43)
							PressKey(0x56)
							task.wait(0.1)
						end
						Character:FindFirstChild("Humanoid").Sit = false
						headSit:Disconnect()
						task.spawn(function()
							repeat
								FirePPInBox(Character, Vector3.one * 20)
								task.wait(0.05)
							until #workspace.Chests:GetChildren() <= 0 or Character:FindFirstChild("Humanoid").Health <= 0
						end)
						repeat
							for _, pp :ProximityPrompt in pairs(workspace.Chests:GetDescendants()) do
								if pp:IsA("ProximityPrompt") then
									if pp.Parent and pp.Parent:IsA("BasePart") then
										Character:MoveTo(pp.Parent.Position)
										task.wait(0.1)
										fireproximityprompt(pp)
									end
								end
							end
							task.wait(0.1)
						until #workspace.Chests:GetChildren() <= 0
						takeQuest()
						task.wait(30)

					end

				end
			end

		end
	end
end

game.Players.LocalPlayer.CharacterAdded:Connect(function(char)
	task.wait(1.5)
	task.spawn(stopvel, char)
	task.spawn(turnHaki)
	task.spawn(start)
end)

task.spawn(stopvel, game.Players.LocalPlayer.Character)
task.spawn(turnHaki)
task.spawn(start)
